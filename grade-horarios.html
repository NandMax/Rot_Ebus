<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ROT EBUS - Rota Presidente Vargas</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>

<body>
  <header>
    <a href="presidente-vargas.html" class="btn-voltar">â—€</a>
    <div class="logo">ROT EBUS</div>
    <div class="banner">A Sua Plataforma de Ã”nibus Favorita</div>
    <nav>ParÃ¡ â€º BelÃ©m e RegiÃ£o â€º Ãguas Lindas</nav>
  </header>

  <main>
    <div class="container3">
      <div id="map2"></div>

      <div class="coluna">
        <h3>Rota Presidente Vargas</h3>
        <p>Selecione uma parada para ver os prÃ³ximos horÃ¡rios:</p>
        <ul id="paradas"> 
            <li data-lat="-1.364" data-lon="-48.374">ğŸš Osvaldo Cruz com Quadra 3</li>
            <li data-lat="-1.362" data-lon="-48.375">ğŸš Osvaldo Cruz com Quadra 5</li>
            <li data-lat="-1.360" data-lon="-48.377">ğŸš Osvaldo Cruz com MÃ¡rio Covas</li>
            <li data-lat="-1.359" data-lon="-48.379">ğŸš Osvaldo Cruz com CearÃ¡</li>
            <li data-lat="-1.358" data-lon="-48.380">ğŸš Osvaldo Cruz com SÃ£o Mateus</li>
            <li data-lat="-1.357" data-lon="-48.382">ğŸš Osvaldo Cruz com IguaÃ§u</li>
            <li data-lat="-1.356" data-lon="-48.384">ğŸš Osvaldo Cruz com Rua C | Sentido Norte</li>
            <li data-lat="-1.355" data-lon="-48.385">ğŸš Osvaldo Cruz com Rua B</li>
            <li data-lat="-1.354" data-lon="-48.386">ğŸš Osvaldo Cruz com OsvaldÃ£o | Sentido Norte</li>
            <li data-lat="-1.353" data-lon="-48.387">ğŸš Osvaldo Cruz com SÃ£o Mateus | Sentido Norte</li>
            <li data-lat="-1.352" data-lon="-48.388">ğŸš Osvaldo Cruz com Teresina</li>
            <li data-lat="-1.351" data-lon="-48.389">ğŸš Osvaldo Cruz com CearÃ¡ | Sentido Norte</li>
            <li data-lat="-1.350" data-lon="-48.390">ğŸš Osvaldo Cruz com ParÃ¡ | Sentido Norte</li>
        </ul>

        <div id="info" class="info-box" style="display:none;"></div>
      </div>

    </div>
  </main>

   <footer>
    ğŸ“ Ãguas Lindas - Ananindeua/PA
  </footer>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // Inicializa o mapa
    const map2 = L.map('map2').setView([-1.362, -48.377], 15);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; OpenStreetMap'
    }).addTo(map2);

    let marcadorAtual = null;

    // FunÃ§Ã£o pra gerar os prÃ³ximos horÃ¡rios
    function gerarHorarios() {
      const agora = new Date();
      const horarios = [];
      for (let i = 0; i < 3; i++) {
        const h = new Date(agora.getTime() + (i + 1) * 15 * 60000); // +10min cada
        horarios.push(h.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }));
      }
      return horarios;
    }

    // Evento de clique
    document.querySelectorAll('#paradas li').forEach(item => {
      item.addEventListener('click', () => {
        const lat = parseFloat(item.dataset.lat);
        const lon = parseFloat(item.dataset.lon);

        // Remove marcador anterior
        if (marcadorAtual) map2.removeLayer(marcadorAtual);

        // Adiciona novo marcador
        marcadorAtual = L.marker([lat, lon]).addTo(map2)
        marcadorAtual = L.marker([lat, lon]).addTo(map2)
        .bindPopup(`
            <b>${item.textContent}</b>
            <div style="margin-top: 5px;">
            PrÃ³ximas chegadas:<br>
            ${gerarHorarios().map(h => `<div style="margin-top: 2px;">ğŸ•’ ${h}</div>`).join('')}
            </div>
        `)
        .openPopup();

        map2.setView([lat, lon], 17);
      });
    });
  </script>
</body>
</html>
